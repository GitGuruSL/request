<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Variables Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-step { margin: 15px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .warning { background-color: #fff3cd; border-color: #ffeaa7; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        code { background-color: #f8f9fa; padding: 2px 6px; border-radius: 3px; }
    </style>
</head>
<body>
    <h1>🧪 Custom Variables Test Guide</h1>
    
    <div class="test-step info">
        <h3>🔧 Recent Fixes Applied:</h3>
        <ul>
            <li>✅ Fixed field name mismatch: <code>variable.values</code> → <code>variable.possibleValues</code></li>
            <li>✅ Added debugging console logs for tracking</li>
            <li>✅ Added automatic tab switching after creation</li>
            <li>✅ Improved error handling with toast messages</li>
        </ul>
    </div>
    
    <div class="test-step warning">
        <h3>📋 How to Test Custom Variables:</h3>
        <ol>
            <li><strong>Open Admin Panel:</strong> <a href="complete-admin.html" target="_blank">complete-admin.html</a></li>
            <li><strong>Navigate:</strong> Click "Product Variables" in sidebar</li>
            <li><strong>Switch Tab:</strong> Click "Custom Variables" tab</li>
            <li><strong>Create Variable:</strong> Click "Add Variable" button</li>
            <li><strong>Select Type:</strong> Choose "Custom Variable" from dropdown</li>
            <li><strong>Fill Form:</strong>
                <ul>
                    <li>Variable Name: e.g., "Screen Size"</li>
                    <li>Variable Type: e.g., "select"</li>
                    <li>Possible Values: e.g., "Small, Medium, Large"</li>
                </ul>
            </li>
            <li><strong>Submit:</strong> Click "Create Variable"</li>
            <li><strong>Verify:</strong> Should see success message and variable in list</li>
        </ol>
    </div>
    
    <div class="test-step success">
        <h3>🔍 Debug Tools:</h3>
        <p>Open browser console (F12) to see detailed logs:</p>
        <ul>
            <li><code>Loading custom variables...</code> - When loading list</li>
            <li><code>Custom variables snapshot size: X</code> - Number of variables found</li>
            <li><code>Loading custom variable: {...}</code> - Each variable data</li>
            <li><code>Creating custom variable with data: {...}</code> - When saving</li>
        </ul>
    </div>
    
    <div class="test-step info">
        <h3>🎯 Expected Behavior:</h3>
        <ul>
            <li>✅ Custom variable creation shows success toast</li>
            <li>✅ Modal closes automatically</li>
            <li>✅ Automatically switches to Custom Variables tab</li>
            <li>✅ New variable appears in the list immediately</li>
            <li>✅ Variable shows: Name, Type, Possible Values, Actions</li>
            <li>✅ Edit/Delete buttons work (show "coming soon" alerts)</li>
        </ul>
    </div>
    
    <div class="test-step warning">
        <h3>🚨 If Still Not Working:</h3>
        <p>Check browser console for errors and verify:</p>
        <ul>
            <li>Firebase connection is working</li>
            <li>Firestore rules allow writes to <code>custom_product_variables</code> collection</li>
            <li>No JavaScript errors in console</li>
            <li>Modal form validation is passing</li>
        </ul>
    </div>
    
    <p><a href="complete-admin.html">🚀 Test Admin Panel Now</a></p>
</body>
</html>
