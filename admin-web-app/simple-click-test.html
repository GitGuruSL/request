<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Click Test</title>
    <style>
        .test-container { padding: 20px; }
        .test-button { margin: 10px; padding: 10px 20px; }
        .result { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Simple Click Test for Admin Panel Functions</h1>
        
        <div class="result" id="results">
            Results will appear here...
        </div>
        
        <!-- Test buttons that should work if functions are loaded -->
        <button class="test-button" onclick="testShowSection()">Test showSection</button>
        <button class="test-button" onclick="testApprove()">Test approveDocument</button>
        <button class="test-button" onclick="testReject()">Test rejectDocument</button>
        
        <!-- Direct onclick calls like in admin panel -->
        <button class="test-button" onclick="approveDocument('test-driver-id', 'driverPhoto', 'drivers')">
            Direct approveDocument Call
        </button>
        <button class="test-button" onclick="rejectDocument('test-driver-id', 'driverPhoto', 'drivers')">
            Direct rejectDocument Call
        </button>
        <button class="test-button" onclick="showSection('drivers')">
            Direct showSection Call
        </button>
    </div>

    <!-- Include the same Firebase config as admin panel -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    
    <script>
        // Initialize Firebase (same as admin panel)
        const firebaseConfig = {
            apiKey: "AIzaSyBNjDJkF10BAdMhWjkWyWn-V5c5Vfqo8P8",
            authDomain: "request-marketplace-firebase.firebaseapp.com",
            projectId: "request-marketplace-firebase",
            storageBucket: "request-marketplace-firebase.firebasestorage.app",
            messagingSenderId: "950006600677",
            appId: "1:950006600677:web:ae0b1e8a65e5bf6c8de32a"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Define global functions (same as admin panel)
        window.showSection = function(sectionName) {
            console.log('‚úÖ showSection called with:', sectionName);
            addResult(`showSection called with: ${sectionName}`, 'success');
            return true;
        };

        window.approveDocument = async function(driverId, documentType, collectionName = 'drivers') {
            try {
                console.log(`üîß Approving ${documentType} for driver ${driverId}`);
                addResult(`Approving ${documentType} for driver ${driverId}`, 'info');
                
                // Simulate the database update (don't actually update)
                addResult(`‚úÖ ${documentType} approved successfully for driver ${driverId}`, 'success');
                return true;
            } catch (error) {
                console.error(`‚ùå Error approving ${documentType}:`, error);
                addResult(`‚ùå Error approving ${documentType}: ${error.message}`, 'error');
                return false;
            }
        };

        window.rejectDocument = async function(driverId, documentType, collectionName = 'drivers') {
            try {
                console.log(`üîß Rejecting ${documentType} for driver ${driverId}`);
                addResult(`Rejecting ${documentType} for driver ${driverId}`, 'info');
                
                // Simulate the database update (don't actually update)
                addResult(`‚úÖ ${documentType} rejected successfully for driver ${driverId}`, 'success');
                return true;
            } catch (error) {
                console.error(`‚ùå Error rejecting ${documentType}:`, error);
                addResult(`‚ùå Error rejecting ${documentType}: ${error.message}`, 'error');
                return false;
            }
        };

        function testShowSection() {
            if (typeof window.showSection === 'function') {
                window.showSection('test-section');
            } else {
                addResult('‚ùå showSection function not found', 'error');
            }
        }

        function testApprove() {
            if (typeof window.approveDocument === 'function') {
                window.approveDocument('test-driver', 'testDocument');
            } else {
                addResult('‚ùå approveDocument function not found', 'error');
            }
        }

        function testReject() {
            if (typeof window.rejectDocument === 'function') {
                window.rejectDocument('test-driver', 'testDocument');
            } else {
                addResult('‚ùå rejectDocument function not found', 'error');
            }
        }

        function addResult(message, type) {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.style.color = type === 'success' ? 'green' : type === 'error' ? 'red' : 'blue';
            div.textContent = new Date().toLocaleTimeString() + ': ' + message;
            results.appendChild(div);
        }

        // Test on load
        window.onload = function() {
            addResult('üîç Testing function availability...', 'info');
            addResult(`showSection: ${typeof window.showSection}`, 'info');
            addResult(`approveDocument: ${typeof window.approveDocument}`, 'info');
            addResult(`rejectDocument: ${typeof window.rejectDocument}`, 'info');
        };
    </script>
</body>
</html>
