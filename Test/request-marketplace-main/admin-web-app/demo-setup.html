<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo Data Setup - Request Marketplace</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .console-output {
            background: #1e1e1e;
            color: #fff;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="text-center mb-4">
                    <h2><i class="fas fa-database me-2"></i>Demo Data Setup</h2>
                    <p class="text-muted">Populate sample data for testing the business product approval workflow</p>
                </div>

                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">
                            <i class="fas fa-rocket me-2"></i>Initialize Demo Data
                        </h5>
                        <p class="card-text">
                            This will create sample categories, master products, and business submissions 
                            to test the admin approval workflow.
                        </p>
                        
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i>
                            <strong>What will be created:</strong>
                            <ul class="mb-0 mt-2">
                                <li>4 product categories (Electronics, Home & Garden, Automotive, Sports)</li>
                                <li>6 master products (iPhone, Samsung Galaxy, MacBook, etc.)</li>
                                <li>1 sample business (TechMart Solutions)</li>
                                <li>3 business product submissions for approval testing</li>
                            </ul>
                        </div>

                        <div class="d-grid gap-2">
                            <button class="btn btn-primary btn-lg" onclick="runDemoScript()">
                                <i class="fas fa-play me-2"></i>Run Demo Data Script
                            </button>
                            <button class="btn btn-success" onclick="openAdminPanel()">
                                <i class="fas fa-external-link-alt me-2"></i>Open Admin Panel
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card mt-4" id="outputCard" style="display: none;">
                    <div class="card-header">
                        <h6><i class="fas fa-terminal me-2"></i>Console Output</h6>
                    </div>
                    <div class="card-body">
                        <div id="consoleOutput" class="console-output"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js';
        import { getFirestore, collection, addDoc, getDocs } from 'https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js';
        
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCtuD42SzwxKmSY5p-x5olFex2U_S9YrMk",
            authDomain: "request-marketplace.firebaseapp.com",
            projectId: "request-marketplace",
            storageBucket: "request-marketplace.appspot.com",
            messagingSenderId: "355474518888",
            appId: "1:355474518888:web:7b3a7f6f7d7a8b0d8e8f9f"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        // Make db available globally for the demo script
        window.db = db;
        
        console.log('ðŸ”¥ Firebase initialized for demo data script');
    </script>
    <script src="demo-data-script.js"></script>
    <script>
        function log(message) {
            const output = document.getElementById('consoleOutput');
            const outputCard = document.getElementById('outputCard');
            outputCard.style.display = 'block';
            output.innerHTML += message + '\n';
            output.scrollTop = output.scrollHeight;
        }

        // Override console.log for demo
        const originalLog = console.log;
        const originalError = console.error;
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            log(args.join(' '));
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            log('ERROR: ' + args.join(' '));
        };

        async function runDemoScript() {
            const button = event.target;
            button.disabled = true;
            button.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Running...';
            
            document.getElementById('consoleOutput').innerHTML = '';
            
            try {
                await populateDemoData();
                button.innerHTML = '<i class="fas fa-check me-2"></i>Completed!';
                button.classList.remove('btn-primary');
                button.classList.add('btn-success');
            } catch (error) {
                console.error('Failed to run demo script:', error);
                button.innerHTML = '<i class="fas fa-exclamation-triangle me-2"></i>Failed';
                button.classList.remove('btn-primary');
                button.classList.add('btn-danger');
            }
        }

        function openAdminPanel() {
            window.open('working-admin.html', '_blank');
        }
    </script>
</body>
</html>
